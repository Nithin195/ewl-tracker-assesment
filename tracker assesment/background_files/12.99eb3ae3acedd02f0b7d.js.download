(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{729:function(e,n,t){var i=t(13);e.exports=(i.default||i).template({1:function(e,n,t,i,a){return"-read"},compiler:[8,">= 4.3.0"],main:function(e,n,t,i,a){var c,s,o=null!=n?n:e.nullContext||{},l=e.hooks.helperMissing,r="function",d=e.escapeExpression;return'<div class="notification-center-menu-side__card -preview '+(null!=(c=t.if.call(o,null!=n?n.read:n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:57},end:{line:1,column:81}}}))?c:"")+'" data-id="'+d(typeof(s=null!=(s=t.id||(null!=n?n.id:n))?s:l)===r?s.call(o,{name:"id",hash:{},data:a,loc:{start:{line:1,column:92},end:{line:1,column:98}}}):s)+'" data-read="'+d(typeof(s=null!=(s=t.read||(null!=n?n.read:n))?s:l)===r?s.call(o,{name:"read",hash:{},data:a,loc:{start:{line:1,column:111},end:{line:1,column:119}}}):s)+'" data-phash="'+d(typeof(s=null!=(s=t.phash||(null!=n?n.phash:n))?s:l)===r?s.call(o,{name:"phash",hash:{},data:a,loc:{start:{line:1,column:133},end:{line:1,column:144}}}):s)+'" data-content="'+d(typeof(s=null!=(s=t.content||(null!=n?n.content:n))?s:l)===r?s.call(o,{name:"content",hash:{},data:a,loc:{start:{line:1,column:160},end:{line:1,column:173}}}):s)+'">\n    <div class="notification-center-menu-side__card-header">\n        <div class="notification-center-menu-side__card-header-time">'+d(typeof(s=null!=(s=t.timeString||(null!=n?n.timeString:n))?s:l)===r?s.call(o,{name:"timeString",hash:{},data:a,loc:{start:{line:3,column:69},end:{line:3,column:85}}}):s)+'</div>\n        <div class="notification-center-menu-side__card-header-status">\n            <div class="notification-center-menu-side__card-header-status-dot"></div>\n        </div>\n    </div>\n    <div class="notification-center-menu-side__card-content">\n        <div class="notification-center-menu-side__card-content-title">\n            '+d(typeof(s=null!=(s=t.main_title||(null!=n?n.main_title:n))?s:l)===r?s.call(o,{name:"main_title",hash:{},data:a,loc:{start:{line:10,column:12},end:{line:10,column:26}}}):s)+'\n        </div>\n        <div class="notification-center-menu-side__card-content-img">\n            <img alt="'+d(typeof(s=null!=(s=t.main_title||(null!=n?n.main_title:n))?s:l)===r?s.call(o,{name:"main_title",hash:{},data:a,loc:{start:{line:13,column:22},end:{line:13,column:36}}}):s)+'" src="'+d(typeof(s=null!=(s=t.main_image||(null!=n?n.main_image:n))?s:l)===r?s.call(o,{name:"main_image",hash:{},data:a,loc:{start:{line:13,column:43},end:{line:13,column:57}}}):s)+'"/>\n        </div>\n    </div>\n</div>\n'},useData:!0})},821:function(e,n,t){"use strict";t.r(n);var i=t(2),a=t(1),c=t.n(a),s=(t(245),t(24),t(3),t(25),t(28),t(27),t(58),t(22),t(4)),o=(t(6),t(20),function(e){var n=new Date(l(e)),t=new Date,i=Number(t)-Number(n),a=Math.floor(i/1e3/60/60/24);i-=1e3*a*60*60*24;var c=Math.floor(i/1e3/60/60);i-=1e3*c*60*60;var s=Math.floor(i/1e3/60);i-=1e3*s*60;var o=Math.floor(i/1e3);return o<0||s<0||c<0||a<0?{secs:1,min:0,hours:0,days:0}:{secs:o,min:s,hours:c,days:a}}),l=function(e){var n=new Date(1e3*e),t=n.getFullYear(),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()];return n.getDate()+" "+i+" "+t+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()},r=function(e){var n=1===e.time?0:1;return"%s "+({secs:["sec","secs"],min:["min","mins"],hours:["hour","hours"],days:["day","days"]}[e.units]||"min")[n]+" ago"},d=t(7),u=t(0),m=function(){Object(i.a)(c.a.mark((function e(){var n,i,a,l,m,f,g,v,h,b,p,O,_,L,M,j,k,y,w,S;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!1,i=!1,a=JSON.parse(d.a.getItem("notification","storedMessages")||"[]"),l=Number(d.a.getItem("notification","lastUpdate")),e.next=6,Promise.all([t.e(58),t.e(35)]).then(t.bind(null,820));case 6:return e.next=8,e.sent;case 8:m=e.sent,f=new m.OlNotifications("prod",(function(){})),g=t(729),"#notification-center-menu-trigger-units","#notification-center-menu-trigger","#notification-center-menu-trigger .icon","#notification-center-menu-side","#notification-center-menu-side-list",".notification-center-menu-side__card.-preview","#notification-center-menu-side-detail","#notification-center-menu-side-detail-content","#notification-center-menu-side-empty","#notification-center-menu-side__title-icon-close","#notification-center-menu-side-detail-controls-back","#notification-center-menu-side-detail-controls-remove",v=Object(u.c)("#notification-center-menu-side-empty"),h={messageCallbacks:function(e){n||(e.length&&d.a.setItem("notification","storedMessages",JSON.stringify(e)),S()),b(e,"#notification-center-menu-side-list"),w(".notification-center-menu-side__card.-preview")},newMessagesCallback:function(e){b(e,"#notification-center-menu-side-list"),w(".notification-center-menu-side__card.-preview")},updatedMessagesCallback:function(){},deletedMessagesCallback:function(){},metaCallback:function(e){p(e,"#notification-center-menu-trigger-units")}},f.initialize((function(){})),f.setTrackingId(gr.user.id,(function(){})),f.setMessageCallbacks(h.messageCallbacks,h.newMessagesCallback,h.updatedMessagesCallback,h.deletedMessagesCallback,h.metaCallback),b=function(e,t){if(0!==e.length){if(!n){v&&v.classList.add("-hidden");var i=e.map((function(e){var n,t,i=o(e.delivered_at),a=(n=i,t="secs",Object.keys(n).forEach((function(e){n[e]>0&&(t=e)})),{time:n[t],units:t}),c=r(a),l=Object(s.a)(c,a.time);return g({content:e.content,id:e.id,main_image:e.card_url,main_title:e.sline,phash:e.phash,read:e.read,timeString:l})})),a=Object(u.c)(t);a&&(a.innerHTML=i.join("")),n=!0}}else v&&!n&&v.classList.remove("-hidden")},p=function(e,n){var t=Object(u.c)(n);t&&(i||(e.unread?(t.innerHTML=e.unread.toString(),t.classList.add("-visible"),i=!0,L({filledTrigger:!0})):t.classList.remove("-visible")))},O=function(){var e=Object(u.c)("#notification-center-menu-trigger-units"),n=f.getCurrentMetaData(a).unread;e&&(n?e.innerHTML=String(n):e&&e.classList.remove("-visible"))},_=function(){var e=Object(u.c)("#notification-center-menu-side"),n=Object(u.d)(".notification.notify.notify--banner, .top-banner"),t=Object(u.c)("#navigation"),i=0;e&&n&&t&&(i=null==t?void 0:t.offsetHeight,null==n||n.map((function(e){i+=e.offsetHeight})),e.style.top=i+"px")},L=function(e){var n=e.openTrigger,t=e.filledTrigger,i=e.notificationsOpened,a=Object(u.c)("#notification-center-menu-trigger .icon"),c=n?i:!t;null==a||a.classList[c?"add":"remove"]("icon--notification"),null==a||a.classList[c?"remove":"add"]("icon--notification-filled")},M=function(){var e,n=Object(u.c)("#notification-center-menu-side"),t="notifications-open"===document.body.dataset.trigger,i=Object(u.c)("#notification-center-menu-trigger-units");L({openTrigger:!0,notificationsOpened:t}),t?(f.getCurrentMetaData(a).unread?null==i||i.classList.add("-visible"):null==i||i.classList.remove("-visible"),null==n||n.classList.remove("-opened")):(f.getCurrentMetaData(a).unread&&(null==i||i.classList.remove("-visible")),null==n||n.classList.add("-opened")),_(),null===(e=Object(u.c)("#notification-center-menu-trigger"))||void 0===e||e.classList.toggle("-opened"),document.body.dataset.trigger=t?"":"notifications-open",window.dispatchEvent(new Event("resize"))},j=function(e){var n,t=e.target,i=t.closest(".notification-center-menu-side__card.-preview"),c=Object(u.c)("#notification-center-menu-side-detail-content"),s=Object(u.c)("#notification-center-menu-side-list"),o=Object(u.c)("#notification-center-menu-side-detail-controls-back"),l=Object(u.c)("#notification-center-menu-side-detail-controls-remove"),r=Object(u.c)("#notification-center-menu-side-detail");a=JSON.parse(d.a.getItem("notification","storedMessages")||"[]"),t.dataset.content?(n=t.dataset,t.classList.add("-read")):(n=i.dataset,i.classList.add("-read")),c&&(c.innerHTML=n.content),o&&(o.dataset.id=n.id),l&&(l.dataset.id=n.id),null==r||r.classList.remove("-hidden"),null==s||s.classList.add("-hidden"),f.setPhash(n.phash),f.markAsReadMessage(n.id),"0"!==t.dataset.read&&"0"!==i.dataset.read||(d.a.setItem("notification","storedMessages",JSON.stringify(f.markAsReadStoredMessage(a,Number(n.id)))),O())},k=function(){var e=Object(u.c)("#notification-center-menu-side-detail-content"),n=Object(u.c)("#notification-center-menu-side-detail"),t=Object(u.c)("#notification-center-menu-side-list");n&&n.classList.add("-hidden"),e&&(e.innerHTML=""),null==t||t.classList.remove("-hidden")},y=function(){var e=Object(u.c)("#notification-center-menu-side-detail-content"),t=Object(u.c)("#notification-center-menu-side-detail"),i=Object(u.c)("#notification-center-menu-side-list"),c=Object(u.c)("#notification-center-menu-side-detail-controls-remove");a=JSON.parse(d.a.getItem("notification","storedMessages")||"[]");var s=Number(null==c?void 0:c.dataset.id),o=null==c?void 0:c.dataset.phash,l=Object(u.c)('[data-id="'+s+'"]'),r=f.deleteStoredMessage(a,s);t&&t.classList.add("-hidden"),e&&(e.innerHTML=""),l&&l.remove(),o&&f.setPhash(o),f.deleteMessage(s),0===r.length?(n=!1,i&&(i.innerHTML="")):null==i||i.classList.remove("-hidden"),d.a.setItem("notification","storedMessages",JSON.stringify(r))},w=function(e){Object(u.d)(e).map((function(e){e.removeEventListener("click",j),e.addEventListener("click",j)}))},S=function(){var e,n,t,i;null===(e=Object(u.c)("#notification-center-menu-side-detail-controls-back"))||void 0===e||e.addEventListener("click",k),null===(n=Object(u.c)("#notification-center-menu-side-detail-controls-remove"))||void 0===n||n.addEventListener("click",y),null===(t=Object(u.c)("#notification-center-menu-trigger"))||void 0===t||t.addEventListener("click",M),null===(i=Object(u.c)("#notification-center-menu-side__title-icon-close"))||void 0===i||i.addEventListener("click",M)},function(){!l||l&&(o(l).min>=5||o(l).hours>=1||o(l).days>=1)?(f.getNewServerMessages(),d.a.setItem("notification","lastUpdate",String((new Date).getTime()/1e3))):(h.messageCallbacks(a),h.metaCallback(f.getCurrentMetaData(a)))}(),_();case 42:case"end":return e.stop()}}),e)})))()};FEATURE_OTHERLEVELS_ENABLED&&(gr.user?m():gr.addEventListener("gr:update:user",m))}}]);
//# sourceMappingURL=12.c56aad34a1989af6ca0b693f02ed8ca2.js.map